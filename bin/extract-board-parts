#!/bin/sh
# extract parts from a gEDA schematic for addition to preferred parts database
# Copyright 2015 Bdale Garbee <bdale@gag.com>, GPLv3+
# assumes attribs file contents like:
#	device
#	value
#	footprint
#	loadstatus
#	provided
#	mfg_part_number
#	vendor
#	vendor_part_number

gnetlist -g bom -o - $1.sch \
	| head -1 \
	| awk '{ printf("%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n", $2, $3, $4, $5, $6, $7, $8, $9) }' 

gnetlist -g bom -o - $1.sch \
	| tail -n +2 \
	| awk '{ printf("%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n", $2, $3, $4, $5, "no", $7, $8, $9) }' \
	| sort | uniq

